<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EQ Journey - Lesson Map</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #ecf0f1;
            overflow-x: auto;
            padding: 20px;
        }

        .map-container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .map-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .map-title {
            font-size: 3rem;
            font-weight: bold;
            color: #f39c12;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .map-subtitle {
            font-size: 1.2rem;
            color: #bdc3c7;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #f39c12, #2ecc71);
            width: 35%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        /* Map Sections */
        .map-section {
            margin-bottom: 60px;
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
        }

        .section-description {
            font-size: 1rem;
            color: #bdc3c7;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Shadow Section */
        .shadow-section {
            background: linear-gradient(45deg, rgba(44,44,84,0.3), rgba(76,61,61,0.3));
            border: 2px solid rgba(231,76,60,0.3);
        }

        .shadow-section .section-title { color: #e74c3c; }

        /* Transitional Section */
        .transitional-section {
            background: linear-gradient(45deg, rgba(84,44,84,0.3), rgba(61,76,61,0.3));
            border: 2px solid rgba(155,89,182,0.3);
        }

        .transitional-section .section-title { color: #9b59b6; }

        /* Higher Section */
        .higher-section {
            background: linear-gradient(45deg, rgba(44,84,44,0.3), rgba(61,61,76,0.3));
            border: 2px solid rgba(46,204,113,0.3);
        }

        .higher-section .section-title { color: #2ecc71; }

        .map-section {
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        /* Lessons Grid */
        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .lesson-card {
            background: rgba(0,0,0,0.4);
            border-radius: 15px;
            padding: 25px;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            backdrop-filter: blur(5px);
        }

        .lesson-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        .lesson-card.completed {
            border-color: #2ecc71;
            background: rgba(46,204,113,0.1);
        }

        .lesson-card.current {
            border-color: #f39c12;
            background: rgba(243,156,18,0.1);
            box-shadow: 0 0 20px rgba(243,156,18,0.3);
        }

        .lesson-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(50%);
        }

        .lesson-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .lesson-icon {
            font-size: 2.5rem;
            margin-right: 15px;
        }

        .lesson-info h3 {
            font-size: 1.3rem;
            margin-bottom: 5px;
            color: #f39c12;
        }

        .lesson-range {
            font-size: 0.9rem;
            color: #bdc3c7;
            font-weight: bold;
        }

        .lesson-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #ecf0f1;
            font-weight: bold;
        }

        .lesson-description {
            font-size: 0.95rem;
            color: #bdc3c7;
            line-height: 1.4;
            margin-bottom: 20px;
        }

        .lesson-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .quiz-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .quiz-btn:hover {
            background: linear-gradient(45deg, #2980b9, #1f618d);
            transform: scale(1.05);
        }

        .game-btn {
            background: linear-gradient(45deg, #e67e22, #d35400);
            color: white;
        }

        .lesson-btn {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
        }

        .lesson-btn:hover {
            background: linear-gradient(45deg, #8e44ad, #7d3c98);
            transform: scale(1.05);
        }

        .lesson-status {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #2c3e50, #34495e);
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 2rem;
            color: #f39c12;
            margin-bottom: 10px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            color: #bdc3c7;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: #e74c3c;
        }

        .quiz-question {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .answer-option {
            display: block;
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            background: rgba(52,73,94,0.8);
            border: 2px solid transparent;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-option:hover {
            background: rgba(52,73,94,1);
            border-color: #3498db;
        }

        .answer-option.selected {
            background: #3498db;
            border-color: #2980b9;
        }

        .submit-quiz-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .submit-quiz-btn:hover {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            transform: scale(1.02);
        }

        /* Game Styles */
        .game-container {
            text-align: center;
            padding: 20px;
        }

        .breathing-game {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .breathing-circle {
            width: 200px;
            height: 200px;
            border: 4px solid #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: transform 4s ease-in-out;
            background: radial-gradient(circle, rgba(52,152,219,0.2), rgba(52,152,219,0.05));
        }

        .breathing-circle.inhale {
            transform: scale(1.3);
            border-color: #2ecc71;
        }

        .breathing-circle.exhale {
            transform: scale(0.8);
            border-color: #e74c3c;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .map-title { font-size: 2rem; }
            .lessons-grid { grid-template-columns: 1fr; }
            .modal-content { padding: 20px; width: 95%; }
            .breathing-circle { width: 150px; height: 150px; }
        }
        /* Header Styles */
        .main-header {
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo h1 {
            font-size: 1.8rem;
            color: #f39c12;
            margin: 0;
        }

        .nav-menu {
            display: flex;
            gap: 30px;
            list-style: none;
            margin: 0;
        }

        .nav-menu a {
            color: #ecf0f1;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-menu a:hover {
            color: #f39c12;
            background: rgba(243,156,18,0.1);
        }

        .nav-menu a.active {
            color: #f39c12;
            background: rgba(243,156,18,0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-stats {
            text-align: right;
        }

        .user-stats .eq-score {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2ecc71;
        }

        .user-stats .level {
            font-size: 0.9rem;
            color: #bdc3c7;
        }

        .profile-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .profile-btn:hover {
            background: linear-gradient(45deg, #2980b9, #1f618d);
            transform: scale(1.05);
        }

        /* Mobile Header */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo">
                <span style="font-size: 2rem;">üß†</span>
                <h1>EQ Journey</h1>
            </div>
            
            <nav>
                <ul class="nav-menu">
                    <li><a href="#" class="active">Lesson Map</a></li>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="leaderboard.html">Progress</a></li>
                    <li><a href="#">Achievements</a></li>
                    <li><a href="#">Community</a></li>
                    <li><a href="#">Resources</a></li>
                </ul>
            </nav>
            
            <div class="user-info">
                <div class="user-stats">
                    <div class="eq-score">450 EQ</div>
                    <div class="level">Shadow Walker</div>
                </div>
                <a href="index3.html"><button class="profile-btn">Profile</button></a>
            </div>
        </div>
    </header>

    <div class="map-container">
        <div class="map-header">
            <h1 class="map-title">üß† EQ Journey Map</h1>
            <p class="map-subtitle">Navigate through 14 leagues of emotional intelligence mastery</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p>Progress: 5/14 Leagues Completed</p>
        </div>

        <!-- Shadow Section -->
        <div class="map-section shadow-section">
            <div class="section-header">
                <h2 class="section-title">üåë Shadow / Struggle Leagues</h2>
                <p class="section-description">Build self-awareness and break negative emotional patterns</p>
            </div>
            <div class="lessons-grid">
                <div class="lesson-card completed" onclick="openModal('lost-mode')">
                    <div class="lesson-status">‚úÖ</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üåö</div>
                        <div class="lesson-info">
                            <h3>Lost Mode</h3>
                            <div class="lesson-range">0-99 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"What are Emotions?"</div>
                    <div class="lesson-description">Build awareness that emotions exist and can be named through simple identification exercises.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="event.stopPropagation(); startLesson('lost-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn" onclick="event.stopPropagation(); openModal('lost-mode')">Take Quiz</button>
                        <button class="action-btn game-btn" onclick="event.stopPropagation(); openModal('lost-mode')">Mini Game</button>
                    </div>
                </div>

                <div class="lesson-card completed" onclick="openModal('chaotic-mode')">
                    <div class="lesson-status">‚úÖ</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üå™Ô∏è</div>
                        <div class="lesson-info">
                            <h3>Chaotic Mode</h3>
                            <div class="lesson-range">100-199 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Triggers & Reactions"</div>
                    <div class="lesson-description">Learn to notice emotional triggers in stressful scenarios and practice better responses.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="event.stopPropagation(); startLesson('chaotic-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn" onclick="event.stopPropagation(); openModal('chaotic-mode')">Take Quiz</button>
                        <button class="action-btn game-btn" onclick="event.stopPropagation(); openModal('chaotic-mode')">Scenario Game</button>
                    </div>
                </div>

                <div class="lesson-card completed" onclick="openModal('addiction-loop')">
                    <div class="lesson-status">‚úÖ</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üîÑ</div>
                        <div class="lesson-info">
                            <h3>Addiction Loop</h3>
                            <div class="lesson-range">200-299 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Healthy vs. Unhealthy Coping"</div>
                    <div class="lesson-description">Break auto-pilot coping mechanisms by choosing better alternatives to escape loops.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="event.stopPropagation(); startLesson('addiction-loop')">Start Lesson</button>
                        <button class="action-btn quiz-btn" onclick="event.stopPropagation(); openModal('addiction-loop')">Take Quiz</button>
                        <button class="action-btn game-btn" onclick="event.stopPropagation(); openModal('addiction-loop')">Choice Game</button>
                    </div>
                </div>

                <div class="lesson-card completed" onclick="openModal('storm-mode')">
                    <div class="lesson-status">‚úÖ</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">‚õàÔ∏è</div>
                        <div class="lesson-info">
                            <h3>Storm Mode</h3>
                            <div class="lesson-range">300-399 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Handling Anger & Jealousy"</div>
                    <div class="lesson-description">Learn cooling techniques through roleplay scenarios to de-escalate conflicts.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="event.stopPropagation(); startLesson('storm-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn" onclick="event.stopPropagation(); openModal('storm-mode')">Take Quiz</button>
                        <button class="action-btn game-btn" onclick="event.stopPropagation(); openModal('storm-mode')">Roleplay Game</button>
                    </div>
                </div>

                <div class="lesson-card current" onclick="openModal('shadow-walker')">
                    <div class="lesson-status">üéØ</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üå´Ô∏è</div>
                        <div class="lesson-info">
                            <h3>Shadow Walker</h3>
                            <div class="lesson-range">400-499 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Awareness without Control"</div>
                    <div class="lesson-description">See the gap between awareness and mastery by spotting when characters lose control.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="event.stopPropagation(); startLesson('shadow-walker')">Start Lesson</button>
                        <button class="action-btn quiz-btn" onclick="event.stopPropagation(); openModal('shadow-walker')">Take Quiz</button>
                        <button class="action-btn game-btn" onclick="event.stopPropagation(); openModal('shadow-walker')">Observation Game</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Transitional Section -->
        <div class="map-section transitional-section">
            <div class="section-header">
                <h2 class="section-title">üåó Transitional Leagues</h2>
                <p class="section-description">Move from self to others, practicing balance & empathy</p>
            </div>
            <div class="lessons-grid">
                <div class="lesson-card locked" onclick="openModal('seeker-mode')">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üîç</div>
                        <div class="lesson-info">
                            <h3>Seeker Mode</h3>
                            <div class="lesson-range">500-599 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Why Self-Awareness Matters"</div>
                    <div class="lesson-description">Start journaling & self-reflection through personal experience analysis.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="event.stopPropagation(); startLesson('seeker-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn" onclick="event.stopPropagation(); openModal('seeker-mode')">Take Quiz</button>
                        <button class="action-btn game-btn" onclick="event.stopPropagation(); openModal('seeker-mode')">Journal Game</button>
                    </div>
                </div>

                <div class="lesson-card locked">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üëÅÔ∏è</div>
                        <div class="lesson-info">
                            <h3>Awareness Mode</h3>
                            <div class="lesson-range">600-699 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Naming Others' Emotions"</div>
                    <div class="lesson-description">Improve emotional vocabulary by identifying emotions in dialogues and images.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="startLesson('awareness-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn">Take Quiz</button>
                        <button class="action-btn game-btn">Emotion Detective</button>
                    </div>
                </div>

                <div class="lesson-card locked">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">‚öñÔ∏è</div>
                        <div class="lesson-info">
                            <h3>Balanced Mode</h3>
                            <div class="lesson-range">700-799 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Managing Emotional Energy"</div>
                    <div class="lesson-description">Learn balance strategies by rating best choices for work, rest, and relationships.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="startLesson('balanced-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn">Take Quiz</button>
                        <button class="action-btn game-btn">Balance Simulator</button>
                    </div>
                </div>

                <div class="lesson-card locked">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üíö</div>
                        <div class="lesson-info">
                            <h3>Empath Mode</h3>
                            <div class="lesson-range">800-899 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Empathy in Action"</div>
                    <div class="lesson-description">Train perspective-taking by picking compassionate responses in various situations.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="startLesson('empath-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn">Take Quiz</button>
                        <button class="action-btn game-btn">Empathy Challenge</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Higher Section -->
        <div class="map-section higher-section">
            <div class="section-header">
                <h2 class="section-title">üåï Higher Leagues</h2>
                <p class="section-description">Master leadership, healing, and transcendence</p>
            </div>
            <div class="lessons-grid">
                <div class="lesson-card locked">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üßò</div>
                        <div class="lesson-info">
                            <h3>Monk Mode</h3>
                            <div class="lesson-range">900-999 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Mindfulness & Calm"</div>
                    <div class="lesson-description">Achieve emotional stability under stress through guided breathing and reflection.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="startLesson('monk-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn">Take Quiz</button>
                        <button class="action-btn game-btn">Meditation Game</button>
                    </div>
                </div>

                <div class="lesson-card locked">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üßô‚Äç‚ôÇÔ∏è</div>
                        <div class="lesson-info">
                            <h3>Sage Mode</h3>
                            <div class="lesson-range">1000-1099 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Wise Decision-Making"</div>
                    <div class="lesson-description">Learn EQ-based leadership through complex long-term vs. short-term dilemmas.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="startLesson('sage-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn">Take Quiz</button>
                        <button class="action-btn game-btn">Leadership Sim</button>
                    </div>
                </div>

                <div class="lesson-card locked">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üå∏</div>
                        <div class="lesson-info">
                            <h3>Healer Mode</h3>
                            <div class="lesson-range">1100-1199 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Helping Others Heal"</div>
                    <div class="lesson-description">Develop emotional support skills through roleplay supportive conversations.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="startLesson('healer-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn">Take Quiz</button>
                        <button class="action-btn game-btn">Healing Conversations</button>
                    </div>
                </div>

                <div class="lesson-card locked">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">‚ú®</div>
                        <div class="lesson-info">
                            <h3>Enlightened Mode</h3>
                            <div class="lesson-range">1200-1299 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Emotional Mastery"</div>
                    <div class="lesson-description">Stay centered despite complexity in situations where multiple emotions overlap.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="startLesson('enlightened-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn">Take Quiz</button>
                        <button class="action-btn game-btn">Mastery Challenge</button>
                    </div>
                </div>

                <div class="lesson-card locked">
                    <div class="lesson-status">üîí</div>
                    <div class="lesson-header">
                        <div class="lesson-icon">üåü</div>
                        <div class="lesson-info">
                            <h3>God Mode</h3>
                            <div class="lesson-range">1300-1400 EQ</div>
                        </div>
                    </div>
                    <div class="lesson-title">"Transcendence & Legacy"</div>
                    <div class="lesson-description">Ultimate EQ application through reflection on life purpose and community impact.</div>
                    <div class="lesson-actions">
                        <button class="action-btn lesson-btn" onclick="startLesson('god-mode')">Start Lesson</button>
                        <button class="action-btn quiz-btn">Take Quiz</button>
                        <button class="action-btn game-btn">Legacy Builder</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="lessonModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Lesson Title</h2>
            </div>
            <div id="modalContent">
                <!-- Dynamic content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        const lessons = {
            'lost-mode': {
                title: 'üåö Lost Mode: "What are Emotions?"',
                quiz: [
                    {
                        question: "Look at this scenario: Sarah just got promoted at work but feels overwhelmed. What emotion is she primarily experiencing?",
                        options: ["Happiness", "Anxiety", "Anger", "Sadness"],
                        correct: 1
                    },
                    {
                        question: "When someone says 'I'm fine' but has crossed arms and won't make eye contact, what might they really be feeling?",
                        options: ["Genuine happiness", "Frustration or upset", "Excitement", "Confusion"],
                        correct: 1
                    }
                ],
                game: {
                    type: 'emotion-matching',
                    title: 'Emotion Detective Game',
                    description: 'Match the facial expressions with the correct emotions!'
                }
            },
            'chaotic-mode': {
                title: 'üå™Ô∏è Chaotic Mode: "Triggers & Reactions"',
                quiz: [
                    {
                        question: "You're in a long grocery store line and someone cuts in front of you. What's your best first response?",
                        options: ["Immediately confront them angrily", "Take a deep breath and assess the situation", "Leave the store", "Complain to other customers"],
                        correct: 1
                    },
                    {
                        question: "What is a 'trigger' in emotional terms?",
                        options: ["A weapon", "Something that causes an automatic emotional response", "A happy event", "A type of therapy"],
                        correct: 1
                    }
                ],
                game: {
                    type: 'scenario-simulator',
                    title: 'Trigger Response Simulator',
                    description: 'Practice handling triggering situations in a safe environment'
                }
            },
            'addiction-loop': {
                title: 'üîÑ Addiction Loop: "Healthy vs. Unhealthy Coping"',
                quiz: [
                    {
                        question: "After a stressful day, which is the healthiest coping strategy?",
                        options: ["Binge-watching TV for 6 hours", "Going for a walk and calling a friend", "Eating a whole bag of chips", "Scrolling social media until 2 AM"],
                        correct: 1
                    },
                    {
                        question: "What makes a coping mechanism 'unhealthy'?",
                        options: ["It's fun", "It creates more problems than it solves", "It's easy to do", "It's popular"],
                        correct: 1
                    }
                ],
                game: {
                    type: 'choice-adventure',
                    title: 'Healthy Choice Adventure',
                    description: 'Navigate through a day making healthy coping choices'
                }
            },
            'storm-mode': {
                title: '‚õàÔ∏è Storm Mode: "Handling Anger & Jealousy"',
                quiz: [
                    {
                        question: "Your friend gets the job you wanted. You feel jealous. What's the most emotionally intelligent response?",
                        options: ["Congratulate them and process your feelings privately", "Tell them they don't deserve it", "Stop being their friend", "Pretend you're not upset"],
                        correct: 0
                    },
                    {
                        question: "When you feel anger rising, the FIRST thing you should do is:",
                        options: ["Express it immediately", "Pause and breathe", "Leave immediately", "Blame someone else"],
                        correct: 1
                    }
                ],
                game: {
                    type: 'breathing-game',
                    title: 'Calm the Storm',
                    description: 'Practice breathing techniques to manage intense emotions'
                }
            },
            'shadow-walker': {
                title: 'üå´Ô∏è Shadow Walker: "Awareness without Control"',
                quiz: [
                    {
                        question: "You notice you're getting irritated but can't seem to stop the feeling. This shows:",
                        options: ["You're weak", "You have awareness but haven't developed control yet", "You should ignore it", "Nothing can be done"],
                        correct: 1
                    },
                    {
                        question: "The gap between knowing what you should do emotionally and actually doing it represents:",
                        options: ["Failure", "A normal part of emotional development", "Something to be ashamed of", "A sign to give up"],
                        correct: 1
                    }
                ],
                game: {
                    type: 'observation-game',
                    title: 'Awareness Gap Observer',
                    description: 'Identify when characters have awareness but lack emotional control'
                }
            },
            'seeker-mode': {
                title: 'üîç Seeker Mode: "Why Self-Awareness Matters"',
                quiz: [
                    {
                        question: "What is the main benefit of self-awareness?",
                        options: ["It makes you perfect", "It helps you understand your patterns and make better choices", "It eliminates all negative emotions", "It makes others like you more"],
                        correct: 1
                    },
                    {
                        question: "Journaling helps with emotional intelligence because:",
                        options: ["It's trendy", "It helps you track and reflect on emotional patterns", "It impresses others", "It takes up time"],
                        correct: 1
                    }
                ],
                game: {
                    type: 'reflection-journal',
                    title: 'Digital Journal Game',
                    description: 'Practice reflective writing to build self-awareness'
                }
            }
        };

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let currentLesson = null;

        // Updated startLesson function to open lesson.html in new window
        function startLesson(lessonId) {
            const lessonUrl = `lesson.html?lesson=${lessonId}`;
            window.open(lessonUrl, '_blank', 'width=1000,height=700,scrollbars=yes,resizable=yes');
        }

        function openModal(lessonId) {
            const modal = document.getElementById('lessonModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            currentLesson = lessons[lessonId];
            if (!currentLesson) return;
            
            modalTitle.textContent = currentLesson.title;
            modalContent.innerHTML = createQuizContent();
            modal.style.display = 'block';
            
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
        }

        function closeModal() {
            document.getElementById('lessonModal').style.display = 'none';
        }

        function createQuizContent() {
            return `
                <div class="quiz-container">
                    <div id="quizContent">
                        ${createQuestionHTML(0)}
                    </div>
                    <div class="quiz-navigation" style="display: none;">
                        <button onclick="previousQuestion()" id="prevBtn" style="display: none;">Previous</button>
                        <button onclick="nextQuestion()" id="nextBtn">Next Question</button>
                        <button onclick="submitQuiz()" id="submitBtn" style="display: none;" class="submit-quiz-btn">Submit Quiz</button>
                    </div>
                </div>
                <hr style="margin: 30px 0; border: 1px solid rgba(255,255,255,0.2);">
                <div class="game-container">
                    <h3 style="color: #f39c12; margin-bottom: 15px;">${currentLesson.game.title}</h3>
                    <p style="margin-bottom: 20px;">${currentLesson.game.description}</p>
                    <button onclick="startGame('${currentLesson.game.type}')" class="action-btn game-btn" style="width: 100%;">Start Mini Game</button>
                    <div id="gameArea" style="margin-top: 20px;"></div>
                </div>
            `;
        }

        function createQuestionHTML(index) {
            if (!currentLesson || !currentLesson.quiz[index]) return '';
            
            const question = currentLesson.quiz[index];
            let optionsHTML = '';
            
            question.options.forEach((option, i) => {
                const isSelected = userAnswers[index] === i ? 'selected' : '';
                optionsHTML += `
                    <button class="answer-option ${isSelected}" onclick="selectAnswer(${i})" data-option="${i}">
                        ${option}
                    </button>
                `;
            });

            return `
                <div class="quiz-question">
                    <div class="question-text">Question ${index + 1}/${currentLesson.quiz.length}: ${question.question}</div>
                    ${optionsHTML}
                </div>
            `;
        }

        function selectAnswer(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            
            // Update UI
            document.querySelectorAll('.answer-option').forEach((btn, i) => {
                btn.classList.toggle('selected', i === optionIndex);
            });
            
            // Show navigation
            document.querySelector('.quiz-navigation').style.display = 'flex';
            document.querySelector('.quiz-navigation').style.justifyContent = 'space-between';
            document.querySelector('.quiz-navigation').style.marginTop = '20px';
            
            updateNavigationButtons();
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            prevBtn.style.display = currentQuestionIndex > 0 ? 'block' : 'none';
            
            if (currentQuestionIndex === currentLesson.quiz.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentLesson.quiz.length - 1) {
                currentQuestionIndex++;
                document.getElementById('quizContent').innerHTML = createQuestionHTML(currentQuestionIndex);
                updateNavigationButtons();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                document.getElementById('quizContent').innerHTML = createQuestionHTML(currentQuestionIndex);
                updateNavigationButtons();
            }
        }

        function submitQuiz() {
            let score = 0;
            currentLesson.quiz.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    score++;
                }
            });
            
            const percentage = (score / currentLesson.quiz.length) * 100;
            const resultMessage = percentage >= 70 ? 'Congratulations! üéâ' : 'Good try! Keep learning! üí™';
            const statusIcon = percentage >= 70 ? '‚úÖ' : 'üìö';
            
            document.getElementById('quizContent').innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 4rem; margin-bottom: 20px;">${statusIcon}</div>
                    <h3 style="color: #f39c12; margin-bottom: 15px;">${resultMessage}</h3>
                    <p style="font-size: 1.5rem; margin-bottom: 10px;">Score: ${score}/${currentLesson.quiz.length}</p>
                    <p style="font-size: 1.2rem; margin-bottom: 30px;">Percentage: ${percentage}%</p>
                    ${percentage >= 70 ? 
                        '<p style="color: #2ecc71;">You\'ve unlocked the next lesson! üöÄ</p>' : 
                        '<p style="color: #e67e22;">Review the lesson and try again to unlock the next level!</p>'
                    }
                    <button onclick="closeModal()" class="submit-quiz-btn" style="margin-top: 20px;">Continue Journey</button>
                </div>
            `;
            
            document.querySelector('.quiz-navigation').style.display = 'none';
        }

        function startGame(gameType) {
            const gameArea = document.getElementById('gameArea');
            
            switch(gameType) {
                case 'emotion-matching':
                    startEmotionMatchingGame(gameArea);
                    break;
                case 'scenario-simulator':
                    startScenarioSimulator(gameArea);
                    break;
                case 'choice-adventure':
                    startChoiceAdventure(gameArea);
                    break;
                case 'breathing-game':
                    startBreathingGame(gameArea);
                    break;
                case 'observation-game':
                    startObservationGame(gameArea);
                    break;
                case 'reflection-journal':
                    startReflectionJournal(gameArea);
                    break;
            }
        }

        function startEmotionMatchingGame(gameArea) {
            const emotions = ['üòä', 'üò¢', 'üò†', 'üò∞', 'üò¥', 'ü§î'];
            const emotionNames = ['Happy', 'Sad', 'Angry', 'Anxious', 'Tired', 'Confused'];
            let currentEmotion = Math.floor(Math.random() * emotions.length);
            let score = 0;
            let rounds = 0;

            gameArea.innerHTML = `
                <div style="text-align: center;">
                    <h4>Match the Emotion!</h4>
                    <div style="font-size: 5rem; margin: 20px 0;">${emotions[currentEmotion]}</div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; max-width: 300px; margin: 0 auto;">
                        ${emotionNames.map((name, index) => 
                            `<button onclick="checkEmotionAnswer(${index}, ${currentEmotion})" class="action-btn game-btn">${name}</button>`
                        ).join('')}
                    </div>
                    <div id="emotionScore" style="margin-top: 20px;">Score: ${score}/5</div>
                </div>
            `;
        }

        function checkEmotionAnswer(selected, correct) {
            // Simple emotion matching logic - this would be expanded in a real game
            if (selected === correct) {
                alert('Correct! üéâ');
            } else {
                alert('Try again! üí™');
            }
        }

        function startBreathingGame(gameArea) {
            let isBreathing = false;
            let breathingPhase = 'ready'; // ready, inhale, hold, exhale

            gameArea.innerHTML = `
                <div class="breathing-game">
                    <h4>Calm the Storm - Breathing Exercise</h4>
                    <p>Follow the circle to practice calming breaths</p>
                    <div class="breathing-circle" id="breathingCircle">
                        <span id="breathingText">Click Start</span>
                    </div>
                    <button onclick="toggleBreathing()" id="breathingBtn" class="action-btn quiz-btn">Start Breathing</button>
                    <div id="breathingInstructions" style="margin-top: 20px;">
                        <p>Inhale for 4 seconds ‚Üí Hold for 4 seconds ‚Üí Exhale for 6 seconds</p>
                    </div>
                </div>
            `;
        }

        function toggleBreathing() {
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const btn = document.getElementById('breathingBtn');
            
            if (!isBreathing) {
                isBreathing = true;
                btn.textContent = 'Stop';
                startBreathingCycle(circle, text);
            } else {
                isBreathing = false;
                btn.textContent = 'Start Breathing';
                text.textContent = 'Click Start';
                circle.className = 'breathing-circle';
            }
        }

        function startBreathingCycle(circle, text) {
            if (!isBreathing) return;

            // Inhale phase
            text.textContent = 'Inhale...';
            circle.className = 'breathing-circle inhale';
            
            setTimeout(() => {
                if (!isBreathing) return;
                // Hold phase
                text.textContent = 'Hold...';
                
                setTimeout(() => {
                    if (!isBreathing) return;
                    // Exhale phase
                    text.textContent = 'Exhale...';
                    circle.className = 'breathing-circle exhale';
                    
                    setTimeout(() => {
                        if (isBreathing) {
                            startBreathingCycle(circle, text); // Repeat cycle
                        }
                    }, 6000); // Exhale for 6 seconds
                }, 4000); // Hold for 4 seconds
            }, 4000); // Inhale for 4 seconds
        }

        function startScenarioSimulator(gameArea) {
            gameArea.innerHTML = `
                <div style="text-align: center;">
                    <h4>Trigger Response Simulator</h4>
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>Scenario:</strong> Someone cuts in line in front of you at the coffee shop. You're already running late for an important meeting.</p>
                    </div>
                    <p style="margin-bottom: 20px;">How do you respond?</p>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button onclick="handleScenarioChoice('aggressive')" class="action-btn" style="background: #e74c3c;">Confront them aggressively</button>
                        <button onclick="handleScenarioChoice('passive')" class="action-btn" style="background: #f39c12;">Say nothing but feel angry</button>
                        <button onclick="handleScenarioChoice('assertive')" class="action-btn" style="background: #2ecc71;">Politely ask if they realized there was a line</button>
                        <button onclick="handleScenarioChoice('mindful')" class="action-btn" style="background: #3498db;">Take a breath and choose your response</button>
                    </div>
                    <div id="scenarioResult" style="margin-top: 20px;"></div>
                </div>
            `;
        }

        function handleScenarioChoice(choice) {
            const resultDiv = document.getElementById('scenarioResult');
            let result = '';
            
            switch(choice) {
                case 'aggressive':
                    result = '‚ö†Ô∏è This might escalate the situation and increase your stress. Try a calmer approach.';
                    break;
                case 'passive':
                    result = 'üòî Bottling up anger often leads to more stress. Consider expressing yourself constructively.';
                    break;
                case 'assertive':
                    result = 'üëç Good! Assertive communication helps resolve conflicts respectfully.';
                    break;
                case 'mindful':
                    result = 'üåü Excellent! Taking a moment to choose your response shows emotional intelligence.';
                    break;
            }
            
            resultDiv.innerHTML = `<div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;">${result}</div>`;
        }

        function startChoiceAdventure(gameArea) {
            gameArea.innerHTML = `
                <div style="text-align: center;">
                    <h4>Healthy Choice Adventure</h4>
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p>It's been a really stressful week at work. You're feeling overwhelmed and need to unwind. What do you choose?</p>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; max-width: 400px; margin: 0 auto;">
                        <button onclick="handleChoiceAdventure('exercise')" class="action-btn game-btn">Go for a run</button>
                        <button onclick="handleChoiceAdventure('social')" class="action-btn game-btn">Call a friend</button>
                        <button onclick="handleChoiceAdventure('binge')" class="action-btn game-btn">Binge Netflix</button>
                        <button onclick="handleChoiceAdventure('substance')" class="action-btn game-btn">Have several drinks</button>
                    </div>
                    <div id="choiceResult" style="margin-top: 20px;"></div>
                </div>
            `;
        }

        function handleChoiceAdventure(choice) {
            const resultDiv = document.getElementById('choiceResult');
            let result = '';
            
            switch(choice) {
                case 'exercise':
                    result = 'üèÉ‚Äç‚ôÇÔ∏è Great choice! Exercise releases endorphins and helps process stress naturally. +10 EQ points!';
                    break;
                case 'social':
                    result = 'üìû Excellent! Social support is crucial for emotional wellbeing. +10 EQ points!';
                    break;
                case 'binge':
                    result = 'üì∫ While relaxing can help, too much passive entertainment might not address the root stress. Try balancing this with active coping. +2 EQ points.';
                    break;
                case 'substance':
                    result = 'üç∑ Be careful - using substances to cope can become a pattern that creates more problems. Consider healthier alternatives. +0 EQ points.';
                    break;
            }
            
            resultDiv.innerHTML = `<div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;">${result}</div>`;
        }

        function startObservationGame(gameArea) {
            gameArea.innerHTML = `
                <div style="text-align: center;">
                    <h4>Awareness Gap Observer</h4>
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>Character Story:</strong> Jake knows he gets anxious before presentations and tells himself "just stay calm," but his heart still races and his palms get sweaty. He's aware of the problem but can't control his physical response yet.</p>
                    </div>
                    <p style="margin-bottom: 20px;">What does this scenario demonstrate?</p>
                    <div style="display: flex; flex-direction: column; gap: 10px; max-width: 400px; margin: 0 auto;">
                        <button onclick="handleObservationChoice('failure')" class="action-btn" style="background: #e74c3c;">Jake is failing at emotional control</button>
                        <button onclick="handleObservationChoice('normal')" class="action-btn" style="background: #2ecc71;">The normal gap between awareness and mastery</button>
                        <button onclick="handleObservationChoice('hopeless')" class="action-btn" style="background: #95a5a6;">Jake will never improve</button>
                        <button onclick="handleObservationChoice('ignore')" class="action-btn" style="background: #f39c12;">Jake should ignore his anxiety</button>
                    </div>
                    <div id="observationResult" style="margin-top: 20px;"></div>
                </div>
            `;
        }

        function handleObservationChoice(choice) {
            const resultDiv = document.getElementById('observationResult');
            let result = '';
            
            switch(choice) {
                case 'failure':
                    result = '‚ùå Not quite. Jake is actually showing progress by having awareness. Failure would be having no awareness at all.';
                    break;
                case 'normal':
                    result = '‚úÖ Exactly! This is the "Shadow Walker" stage - having awareness but not yet having full control. This is a normal and necessary step in emotional development.';
                    break;
                case 'hopeless':
                    result = '‚ùå This is too pessimistic. Awareness is the first step toward control. Jake can definitely improve with practice.';
                    break;
                case 'ignore':
                    result = '‚ùå Ignoring emotions usually makes them stronger. Jake\'s awareness is actually a strength he should build on.';
                    break;
            }
            
            resultDiv.innerHTML = `<div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;">${result}</div>`;
        }

        function startReflectionJournal(gameArea) {
            gameArea.innerHTML = `
                <div style="text-align: center;">
                    <h4>Digital Journal Game</h4>
                    <p style="margin-bottom: 20px;">Practice reflective writing to build self-awareness</p>
                    <div style="text-align: left; max-width: 500px; margin: 0 auto;">
                        <label style="display: block; margin-bottom: 10px; font-weight: bold;">Prompt: Describe a recent situation where you felt a strong emotion.</label>
                        <textarea id="journalEntry" style="width: 100%; height: 100px; padding: 10px; border-radius: 8px; border: none; background: rgba(0,0,0,0.3); color: white; resize: vertical;" placeholder="Write about what happened, how you felt, and what you learned..."></textarea>
                        <button onclick="analyzeJournalEntry()" class="action-btn quiz-btn" style="width: 100%; margin-top: 15px;">Analyze My Entry</button>
                    </div>
                    <div id="journalAnalysis" style="margin-top: 20px;"></div>
                </div>
            `;
        }

        function analyzeJournalEntry() {
            const entry = document.getElementById('journalEntry').value.trim();
            const analysisDiv = document.getElementById('journalAnalysis');
            
            if (entry.length < 50) {
                analysisDiv.innerHTML = `<div style="background: rgba(231,76,60,0.2); padding: 15px; border-radius: 8px; color: #e74c3c;">Please write at least 50 characters to get meaningful insights about your emotional patterns.</div>`;
                return;
            }
            
            // Simple analysis based on keywords (in a real app, this would be more sophisticated)
            let insights = [];
            
            if (entry.toLowerCase().includes('angry') || entry.toLowerCase().includes('mad') || entry.toLowerCase().includes('frustrated')) {
                insights.push("üî• You mentioned anger/frustration - notice what triggers these feelings");
            }
            if (entry.toLowerCase().includes('sad') || entry.toLowerCase().includes('disappointed') || entry.toLowerCase().includes('hurt')) {
                insights.push("üíô You expressed sadness - it's healthy to acknowledge these feelings");
            }
            if (entry.toLowerCase().includes('anxious') || entry.toLowerCase().includes('worried') || entry.toLowerCase().includes('nervous')) {
                insights.push("‚ö° Anxiety appeared in your reflection - consider what you can control vs. what you can't");
            }
            if (entry.toLowerCase().includes('happy') || entry.toLowerCase().includes('excited') || entry.toLowerCase().includes('proud')) {
                insights.push("üåü Great to see positive emotions - reflect on what created these feelings");
            }
            
            if (insights.length === 0) {
                insights.push("üéØ Good start! Continue journaling regularly to identify emotional patterns");
            }
            
            analysisDiv.innerHTML = `
                <div style="background: rgba(46,204,113,0.2); padding: 20px; border-radius: 8px; text-align: left;">
                    <h5 style="color: #2ecc71; margin-bottom: 15px;">Journal Insights:</h5>
                    ${insights.map(insight => `<p style="margin-bottom: 10px;">‚Ä¢ ${insight}</p>`).join('')}
                    <p style="margin-top: 15px; font-style: italic; color: #bdc3c7;">Keep journaling to develop deeper self-awareness! üìù</p>
                </div>
            `;
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            // Close modal when clicking outside
            window.onclick = function(event) {
                const modal = document.getElementById('lessonModal');
                if (event.target === modal) {
                    closeModal();
                }
            };
            
            // Add some scroll animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeIn 0.8s ease-out forwards';
                    }
                });
            }, observerOptions);
            
            document.querySelectorAll('.lesson-card').forEach(card => {
                observer.observe(card);
            });
        });

        // Global variables for games
        let isBreathing = false;
    </script>
</body>
</html>